jQuery(function(e){let t="";e("#quote-submission-form").on("submit",function(t){t.preventDefault();const o=e("#quote-author").val(),n=e("#error");""!==o.length?n.show("slow"):alert("Please enter name of Author.");const r=e("#quote-content").val();""!==r.length?n.show("slow"):alert(" Please enter quote.");const s=e("#quote-source").val();""!==s.length?n.show("slow"):alert(" Please enter source of quote, if known, or 'anonymous'.");const l=e("#quote-source-url").val();""!==l.length?n.show("slow"):alert("Please enter website link to quote, if available."),e.ajax({method:"post",url:api_vars.rest_url+"wp/v2/posts",data:{title:o,content:r,source:s,sourceUrl:l,status:"pending"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.wpapi_nonce)}}).done(function(){alert("Thank you for your submission!"),e("#quote-submission-form").slideUp(500)}).fail(function(){alert("Form submit failed")})}),e("#new-quote-button").on("click",function(o){o.preventDefault(),t=document.URL,e.ajax({method:"get",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(t){const o=t[0].title.rendered,n=t[0].content.rendered,r=t[0]._qod_quote_source,s=t[0]._qod_quote_source_url;e(".entry-content").html(n),e(".entry-title").html(o),e(".source").html('<a href="'+s+'">'+r+"</a>"),history.pushState(null,null,t[0].slug)}).fail(function(){alert("Sorry, this request was not completed.")}),e(window).on("popstate",function(){window.location.replace(t)})})});